\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{multirow}
\begin{document}
\title{Seleção dinâmica de interface em redes \\ IEEE 802.15.4}
\author{Bruno Monteiro Pires}
\maketitle
\clearpage

\section{Introdução}
	A disseminação de soluções tecnológicas baseadas no conceito de Internet das Coisas promoveu a proliferação de dispositivos interconectados e de baixa potência. Neste contexo, a comunicação via radiofrequência é frequentemente utilizada. Para que seja possível estabelecer links de rádio confiáveis entre dispositivos deste tipo são necessários protocolos e hardware especialmente desenvolvidos, destinados a lidar com situações de instabilidade e capazes promover máxima eficiência energética.

	A norma IEEE 802.15.4 \cite{1237559}, define um protocolo de comunicação e parâmetros de implementação da camada física para interconexão de dispositivos via radiofrequência em redes de área pessoal sem fio com baixas taxas de transmissão (LR-WPANs). Esta norma é base para alguns dos protocolos mais disseminados na indústria como ZigBee \cite{bibid}, 6LowPAN \cite{bibid}, WirelessHART \cite{bibid}, MiWi \cite{bibid} entre outros. A norma original, publicada em 2003, propunha apenas duas implementações distintas para a camada física (PHY), sendo a primeira destinada à operação nas bandas de 868 MHz e 915 MHz utilizando modulação BPSK e a segunda na banda de 2450 MHz, através da modulação O-QPSK. Desde sua publicação original, no entanto, esta norma recebeu diversas emendas e revisões, através das quais foram adicionados novos PHYs e realizadas alterações nos protocolos de comunicação. 
	
	Dispositivos compatíveis devem implementar por completo ao menos um PHY, podendo opcionalmente ser compatíveis com múltiplos PHYs. A seleção dos PHYs a serem utilizados, no entanto, fica a cargo das regulamentações locais e preferências do usuário. Em sua última versão, IEEE 802.15.4-2015 \cite{7460875}, há dezenove PHYs, capazes de operar em bandas de frequência que variam entre 169 MHz e cerca de 9 GHz. A grande diversidade de  implementações prevista pela norma faz com que frequentemente as legislações vigentes em cada país sejam compatíveis, simultaneamente, com diversas delas.
	
	Dado que a utilização de diferentes modulações, ou bandas de frequência, resulta, de acordo com as condições do ambiente, em alterações na qualidade dos links de rádio \cite{bibid}, considera-se que seja possível explorar a diversificação de interfaces admitida pela norma a fim de otimizar a performance de links de comunicação. No caso de dispositivos dotados de múltiplas interfaces, uma forma através da qual este objetivo pode ser alcançado é utilizando um algoritmo de seleção dinâmica, capaz de eleger a interface mais adequada, a cada momento, para a transferência dos dados. Com este objetivo, nas seções seguintes, será proposta a arquitetura batizada de PhyNode, dotada de três interfaces IEEE 802.15.4, operando nas bandas de frequência de 433 MHz, 915 MHz e 2450 MHz. Selecionadas a fim de satisfazer as exigências da regulamentação local, de acordo com a resolução nº 452 da ANATEL \cite{bibid} e a fim de prover a maior amplitude espectral possível.

\section{Diversidade de interfaces}	
	A plataforma PhyNode inclui três \textit{transceivers}, sendo dois CC1201 \cite{bibid} destinados às bandas de frequência sub-GHz e um CC2520 \cite{bibid}, destinado à banda de 2450 MHz. As configurações disponíveis em cada um destes componentes permitem que, em alguns casos, mais de um PHY seja utilizado através do mesmo \textit{transceiver}, porém  não simultaneamente.
	
	A seleção do método de acesso ao meio físico na norma IEEE 802.15.4 é realizada através de um identificador único de 32 bits, composto por um número de página (armazenado nos 5 bits mais altos) e um número de canal (27 bits restantes). Esta arquitetura foi introduzida com o intuito de permitir a declaração de novos PHYs a medida que fossem realizadas novas revisões do protocolo. PhyNode pode utilizar-se deste identificador para carregar as configurações adequadas num \textit{trasnceiver} antes de transmitir um pacote de dados. O conjunto de PHYs IEEE 802.15.4 suportados em PhyNode é apresentado na Tabela \ref{tab:modos_opr}.
	
	\begin{table}[h]
		\centering
		\begin{tabular}{|c|c|l|l|l|l|l|}
			\hline
			\textbf{Página}    & \multicolumn{1}{l|}{\textbf{Canais}}   & \textbf{Banda}          & \textbf{Modulação}   & \textbf{Taxa transf.} \\ \hline
			0                  & 11$\sim$26                             & 2450MHz                 & O-QPSK               & 250Kb/s               \\ \hline
			1                  & 1$\sim$10                              & 915MHz                  & ASK                  & 250Kb/s               \\ \hline
			\multirow{3}{*}{7} & \multirow{3}{*}{0$\sim$14}             & \multirow{3}{*}{433MHz} & \multirow{3}{*}{MSK} & 250Kb/s               \\
		                       &                                        &                         &                      & 100Kb/s               \\
			                   &                                        &                         &                      & 31.25Kb/s             \\ \hline
			9                  & 0$\sim$128                             & 915MHz                  & 2-FSK                & 50Kb/s                \\ \hline 
		\end{tabular}
		\caption{Modos de operação suportados}
		\label{tab:modos_opr}
	\end{table}
	
	Cada PHY define uma modulação específica, taxas de transferência distintas e um certo número de canais para cada banda de frequência suportada. Sendo que cada canal representa uma pequena faixa de frequência dentro do espectro da banda a qual pertence. A quantidade de canais disponíveis em cada PHY pode variar, de acordo com a largura de banda dedicada a cada um deles. As frequências dos canais disponíveis especificamente nos PHYs utilizados pelos módulos PhyNode são  descritas de acordo com as equações (\ref{eq:ch433msk}), (\ref{eq:ch915ask}), (\ref{eq:ch915fsk}) e (\ref{eq:ch2450oqpsk}).
	
	\begin{equation}
		\label{eq:ch433msk}
		f_{P0}(C) = 433.164 + 0.108\times C, \forall C \in \{0..14\}
	\end{equation}
	
	\begin{equation}
		\label{eq:ch915ask}
		f_{P1}(C) = 906 + 2 (C - 1), \forall C \in \{1..10\}
	\end{equation}
	
	\begin{equation}
		\label{eq:ch915fsk}
		f_{P7}(C) = 902.2 + 0.2 \times C, \forall C \in \{0..128\}
	\end{equation}
		
	\begin{equation}
		\label{eq:ch2450oqpsk}
		f_{P9}(C) = 2405 + 5 (C - 11), \forall C \in \{11..26\}
	\end{equation}

	Adicionalmente é possível selecionar a potência de transmissão utilizada por cada \textit{trasnceiver}, sendo que o modelo CC1201 é capaz de operar entre -40 DBm e 14 DBm (ou -37 DBm a 17 DBm, considerando-se o uso de antenas com ganho de 3 DBi), já o modelo CC2520 pode operar entre -18 DBm e 5 DBm (ou -13 DBm a 10DBm, considerando-se o uso de antenas com ganho de 5 DBi).

	Também é importante ressaltar que para que se possa estabelecer um link entre dois dispositivos eles devem estar alinhados quanto à diversos parâmetros, com exceção geralmente apenas da potência de transmissão. Para que estes parâmetros possam ser alterados dinamicamente é são requeridos mecanismos de sincronia, responsáveis manter ambas as configurações atualizadas em ambas as extremidades do link.

\section{Avaliação da qualidade dos links}
	Para que seja possível utilizar um método algorítmico para alternar dinamicamente entre diferentes interfaces é crítico que existam meios para estimar, individualmente, a confiabilidade dos links estabelecidos através de cada uma das interfaces.  
	Entende-se por confiabilidade do link, a probabilidade de um pacote de dados enviado através do mesmo ser entregue com sucesso a seu destinatário. Quanto maior a probabilidade das transmissões serem bem sucedidas, maior a confiabilidade do link. 

	A princípio é possível averiguar a confiabilidade de um link estabelecendo-se as razões entre o número de pacotes enviados e o número de pacotes recebidos com sucesso. A transmissão de pacotes de confirmação (\textit{acknowledgement}) por parte do receptor pode ser utilizada para manter a métrica atualizada em ambas as extremidades do link. No entanto esta abordagem, por basear-se em estatísticas computadas a partir do histórico de transmissões, tende a permitir altas taxas de perda de pacotes antes de obter resultados acurados, além de ser pouco sensível a variações abruptas na qualidade dos links.
	
	A fim de superar certas barreiras impostas por métricas baseadas somente em parâmetros de alto nível, como a citada anteriormente, é possível analisar certos parâmetros físicos do link. A avaliação de parâmetros deste tipo geralmente requer algum suporte em hardware, uma vez que são provenientes de interpretações analógicas do sinal recebido, obtidas antes que este seja digitalizado. O LQI (\textit{Link Quality Indicator}), por exemplo, é um parâmetro disponibilizado por \textit{transceivers} compatíveis com a IEEE 802.15.4 e tem a finalidade de representar a qualidade do sinal recebido quanto à sua distorção em relação a um sinal ideal. Já o RSSI (\textit{Received Signal Strength Indicator}), é um indicador disponibilizado pela maioria dos \textit{transceivers} e fornece uma medida relativa da intensidade do sinal recebido. É possível ainda utilizar o RSSI e o LQI juntamente para obter uma representação mais acurada da qualidade do sinal recebido.
	
	A principal vantagem de utilizar parâmetros provenientes da camada física para estimativas de confiabilidade é a possibilidade de identificar links de baixa qualidade antes que estes falhem. Adicionalmente estes parâmetros tendem a responder mais rapidamente a variações abruptas nas condições físicas do meio e na presença de interferências externas, devido a serem computados somente a partir da transmissão em andamento, não dependendo de séries históricas. 

	Adicionalmente, é importante ressaltar que a confiabilidade não é o único parâmetro a ser considerado. A conservação de energia é, frequentemente, um fator de extrema importância para os sistemas baseados na IEEE 802.15.4 e assim sendo deve-se priorizar a utilização das interfaces que apresentem menor consumo. É possível ainda permitir que o algoritmo de seleção controle determinadas configurações dos \textit{transceivers}, a fim de obter maior confiabilidade enquanto otimiza dinamicamente o consumo de energia. A potência de transmissão, por exemplo, é um parâmetro relativamente independente e que exerce grande influência tanto sobre o consumo energético quanto na confiabilidade do link e portanto, idealmente, poderia ser calibrada dinamicamente.

\subsection{Caracterização das interfaces disponíveis}

\clearpage
\section{Radio Parameters}
CC2520
\begin{itemize}
	\item EIRP = -13 ~ 10
	\item CHANNEL = 2405 ~2505 [16]
\end{itemize}
CC1201
\begin{itemize}
	\item EIRP = -37 ~ 17
	\item CHANNEL = 410 ~ 475 [14]
	\item SYMBOL RATE
	\item MODULATION
\end{itemize}
Common
\begin{itemize}
	\item Packet length
	\item Packet interval
\end{itemize}
Output parameters
\begin{itemize}
	\item RSSI
	\item LQI
	\item CRC\_OK
\end{itemize}

\subsection{Experimentos}
\subsubsection{title}
Energy Scan
Sweep {Perfil, Potência, Canal, Tamanho}
Sweep {}
\clearpage

\bibliography{main}
\bibliographystyle{plain}

\end{document}
